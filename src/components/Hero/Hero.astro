---
import type { HeroProps } from './Hero.types';
import styles from './Hero.module.css';

const { title, subtitle, buttonText } = Astro.props as HeroProps;

// Список фоновых картинок
const backgrounds = [
  '/images/banner1.webp',
  '/images/banner2.webp',
  '/images/banner3.webp',
  '/images/banner4.webp',
];

let currentBackground = 0;
let backgroundUrl = backgrounds[currentBackground];
---

<section class={styles.hero}>
  <div class={styles.imageWrapper}>
    <img id="hero-bg" src={backgroundUrl} alt="Background" class={styles.background} />
  </div>

  <div class={styles.overlay}>
    <div class={styles.container}>
      <h1>{title}</h1>
      <h2>{subtitle}</h2>
      <button id="heroOrderButton">{buttonText}</button>
    </div>
  </div>
</section>

<script type="module">
  const backgrounds = [
    '/images/banner1.webp',
    '/images/banner2.webp',
    '/images/banner3.webp',
    '/images/banner4.webp',
  ];

  let currentBackground = 0;
  const img = document.getElementById('hero-bg');

  // Смена фоновых картинок
  setInterval(() => {
    currentBackground = (currentBackground + 1) % backgrounds.length;
    if (img) {
      img.src = backgrounds[currentBackground];
    }
  }, 3000);

  // Подключаем кнопку заказа к модальному окну
  document.addEventListener('DOMContentLoaded', () => {
    const heroOrderButton = document.getElementById('heroOrderButton');
    
    if (heroOrderButton && window.openOrderModal) {
      heroOrderButton.addEventListener('click', () => {
        window.openOrderModal();
      });
    }
  });
</script>
